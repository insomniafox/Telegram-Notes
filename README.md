
# Telegram Notes

## Описание проекта

Telegram Notes — это веб-приложение для управления заметками с возможностью аутентификации и авторизации пользователей. Приложение также включает Telegram-бот для взаимодействия с заметками через мессенджер и контейнеризацию всех сервисов с использованием Docker.

### Основной функционал:

1. **Управление заметками:**
   - CRUD операции для заметок (создание, чтение, обновление, удаление).
   - Каждая заметка включает идентификатор, заголовок, содержимое, теги, дату создания и дату последнего изменения.
   - Возможность добавления нескольких тегов и поиска заметок по тегам.
   - Данные хранятся в базе данных PostgreSQL/MySQL с использованием SQLAlchemy.

2. **Аутентификация и авторизация:**
   - Регистрация и аутентификация пользователей с использованием JWT-токенов.
   - Каждый пользователь может управлять только своими заметками.
   - Пароли хранятся в зашифрованном виде с использованием надежного алгоритма хеширования.

3. **Telegram-бот:**
   - Асинхронный Telegram-бот, предоставляющий доступ к заметкам:
     - Авторизация через Telegram.
     - Получение списка заметок.
     - Создание новой заметки.
     - Поиск заметок по тегам.
   - Бот взаимодействует с API приложения.

4. **Docker контейнеризация:**
   - Все сервисы (FastAPI-приложение, база данных, Telegram-бот) запущены в отдельных Docker-контейнерах для упрощения деплоя и управления.

5. **Логирование и обработка ошибок:**
   - Централизованное логирование действий пользователей и ошибок с ротацией логов по дате.
   - Обработка исключений и возврат информативных сообщений пользователю.

## Используемые технологии

- **Python 3.11**
- **FastAPI** — фреймворк для создания API.
- **SQLAlchemy** — ORM для взаимодействия с базой данных.
- **PostgreSQL/MySQL** — база данных для хранения заметок.
- **JWT** — для аутентификации пользователей.
- **aiogram** — библиотека для создания Telegram-ботов.
- **Docker** — контейнеризация сервисов.
- **pytest** — для написания unit-тестов (опционально).
- **Git** — контроль версий.

## Установка и запуск

### Предварительные требования

- Установите [Docker](https://www.docker.com/get-started) и [Docker Compose](https://docs.docker.com/compose/install/).

### Шаги установки:

1. **Клонируйте репозиторий:**

   ```bash
   git clone https://github.com/yourusername/notemanager-app.git
   cd notemanager-app
   ```

2. **Настройте переменные окружения:**

   Создайте файл `.env` в корневом каталоге проекта и добавьте необходимые переменные окружения:

   ```env
   POSTGRES_DB=your_db
   POSTGRES_USER=your_user
   POSTGRES_PASSWORD=your_password
   DATABASE_URL=postgresql+asyncpg://your_user:your_password@db/your_db
   JWT_SECRET=your_jwt_secret
   TELEGRAM_TOKEN=your_telegram_bot_token
   ```

3. **Запуск контейнеров:**

   Запустите проект с помощью Docker Compose:

   ```bash
   docker-compose up --build
   ```

   Это запустит приложение FastAPI, базу данных PostgreSQL и Telegram-бота.

4. **Миграции базы данных:**

   Для инициализации базы данных выполните миграции:

   ```bash
   docker-compose exec web alembic upgrade head
   ```

5. **Telegram-бот:**

   - Откройте Telegram и найдите вашего бота по токену, чтобы начать работу.
   - Пример команд: `/start`, `/get_notes`, `/create_note`, `/search_note`.

## Пример использования API

- **POST** `/register` — регистрация пользователя.
- **POST** `/login` — аутентификация пользователя.
- **GET** `/notes` — получение списка заметок.
- **POST** `/notes` — создание новой заметки.
- **PUT** `/notes/{id}` — обновление заметки.
- **DELETE** `/notes/{id}` — удаление заметки.
- **GET** `/notes/search?tag=tag_name` — поиск заметок по тегу.

Пример запроса на создание заметки:

```bash
POST /notes
Authorization: Bearer <jwt_token>
{
  "title": "My Note",
  "content": "This is the content of my note",
  "tags": ["fastapi", "postgresql"]
}
```

[//]: # (## Логирование)

[//]: # ()
[//]: # (Логи приложения сохраняются в файл `logs/app.log`. Логи ротации настроены на ежедневную смену файлов.)